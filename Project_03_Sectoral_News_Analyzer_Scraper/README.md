# Project 3: Sectoral News Analyzer & Scraper

This project is a Flask-based web application designed for aggregating, analyzing, and understanding news sentiment for Indian financial markets. Its core feature is a powerful, custom-built web scraping pipeline that creates a local news database, which is then used by the front-end for AI-driven sectoral and stock-specific analysis.

## 🚀 Key Features

-   **Custom Web Scraping Pipeline**:
    -   Utilizes **Scrapy** and **Playwright** to build dedicated spiders for major Indian financial news websites (e.g., Moneycontrol).
    -   Handles JavaScript-heavy sites to ensure all content is rendered before extraction.
    -   Bypasses the fragility of scraping Google Search by targeting news sites directly.
    -   Stores all scraped articles in a local **SQLite database**, creating a persistent, self-managed news corpus.
-   **Dual-Sentiment Analysis**:
    -   **VADER (Lexical)**: Provides a quick, dictionary-based sentiment score for an immediate market pulse.
    -   **Google Gemini (Contextual)**: Performs deep, AI-powered analysis on aggregated news to provide nuanced insights, summaries, risk identification, and key themes.
-   **Interactive Flask Web UI**:
    -   Allows users to perform analysis on either sectors or individual stocks over a specified date range.
    -   Visualizes daily sentiment trends using **Chart.js**.
    -   Presents detailed, structured reports generated by the Gemini AI.
    -   Includes an on-demand scraping trigger to fetch fresh news for ad-hoc analysis.

## ⚙️ Setup and Usage

### Prerequisites
- Python >= 3.10
- Git
- Google Chrome (for Playwright)

### Installation
1.  **Navigate to this project's directory:**
    ```bash
    cd Project_03_Sectoral_News_Analyzer_Scraper
    ```

2.  **Create and activate a Python virtual environment:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # On Windows: venv\Scripts\activate
    ```

3.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
    This will also install Playwright's browser drivers, which may take a few moments.

4.  **Configure API Keys:**
    - Create a `.env` file in this project's root directory.
    - Add your API keys:
      ```env
      GEMINI_API_KEY="your-google-gemini-api-key"
      NEWSAPI_ORG_API_KEY="your-newsapi-key" # Used as a fallback news source
      FLASK_SECRET_KEY="a_very_strong_random_secret_key"
      ```

### Running the Application

1.  **Populate the News Database (Recommended First Step):**
    Run the bulk scraper to collect news for a desired period. This script will use the spiders defined in the `news_scrapers` directory.
    ```bash
    python scrape_financial_news_db.py
    ```
    You will be prompted to enter a start and end date.

2.  **Run the Flask Web Application:**
    ```bash
    flask run --port=5003
    ```

3.  Open your web browser and navigate to **http://127.0.0.1:5003**.
